## React Compiler (React Forget)

> Manual memoization is a reasonable compromise, but we werenâ€™t satisfied.
> Our vision is for React to automatically re-render just the right parts of the UI when state changes, without compromising on Reactâ€™s core mental model.

```
React 19 !== Compiler
Compiler comes next after React 19

- useMemo, useCallback, memo -> React Compiler
- forwardRef -> ref is a prop
- React.lazy -> RSC, promise-as-child
- useContext -> use(Context)
- throw promise -> use(promise)
```

"ì•„ì§ ì»´íŒŒì¼ëŸ¬ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ì§€ ì•Šì€ ê²½ìš°" -------> "ì´ë¯¸ ì»´íŒŒì¼ëŸ¬ê°€ í™œì„±í™”ëœ ê²½ìš°"
**ì „í™˜ ê¸°ê°„**ì€ ë¬´ì¡°ê±´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ëŸ¬ê°€ ì¶œì‹œ ëë‹¤ê³  í•´ì„œ useMemo, useCallback ë‹¤ ìŠì–´ë„ ë¼! ì´ë ‡ê²Œ ê°€ë©´ ì•ˆëœë‹¤

### ë³€ê²½ í¬ì¸íŠ¸ë“¤

- **React CompilerëŠ” ë¦¬ì•¡íŠ¸ ì½”ë“œë¥¼ ëª¨ë“  í›…ì˜ ì¢…ì†ì„±, ì»´í¬ë„ŒíŠ¸ì˜ í”„ë¡œí¼í‹° ë° ì»´í¬ë„ŒíŠ¸ ìì²´ê°€ ë©”ëª¨í™”ëœ ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” Babel í”ŒëŸ¬ê·¸ì¸ì´ ë  ê²ƒ (=everything gets memoized)**
  - Before) ë¶€ëª¨ê°€ re-renderë˜ë©´ ìì‹ë„ ëª¨ë‘ ë‹¤ re-render ë˜ëŠ” êµ¬ì¡°
  - After) ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ propì´ ë³€ê²½ë  ë•Œë§Œ re-render ë˜ëŠ” êµ¬ì¡°
- **ì„±ëŠ¥ì„ ìœ„í•œ Composition ê¸°ë²•ì´ ë” ì´ìƒ í•„ìš”ì—†ì–´ì§€ê²Œ ë  ê²ƒ** [ì°¸ê³ ](https://www.developerway.com/posts/react-re-renders-guide#part3.2)

  - ìƒíƒœë¥¼ ì•„ë˜ë¡œ ì´ë™ì‹œí‚¤ê¸°
    - ![alt text](image.png)
  - ì»´í¬ë„ŒíŠ¸ë¥¼ ìì‹ìœ¼ë¡œ ì „ë‹¬
    - ![alt text](image-1.png)

- **useMemo, useCallbackì„ í†µí•œ ë¶ˆí•„ìš”í•œ re-render ë°©ì§€ë„ ë¶ˆí•„ìš”í•´ì§ˆ ê²ƒ**

  - Antipattern ğŸ˜¡
    - ![alt text](image-2.png)
  - Good pattern ğŸ˜€
    - ![alt text](image-3.png)

- **Diffing (ë¹„êµ) & Reconciliation (ì¬ì¡°ì •) ë°©ì‹ì´ ë³€í™”í•  ê²ƒ** [ì°¸ê³ ](https://www.developerway.com/posts/reconciliation-in-react)

  ```jsx
  const ParentComponent = () => {
    const Input = () => <input />;
    return <Input />;
  };
  ```

  - "defining component inside other components"ê°€ anti-patternì´ì—ˆë˜ ì´ìœ 
    - `ParentComponent`ê°€ re-render í•  ì¼ì´ ìƒê¸¸ ë•Œ ë§ˆë‹¤ `Input`ì»´í¬ë„ŒíŠ¸ëŠ” ë§¤ë²ˆ remountë¨
    - reconciliationì˜ ê´€ì ì—ì„œ ë´¤ì„ ë•Œ `ParentComponent`ëŠ” { type: Input }ìœ¼ë¡œ í‘œí˜„ë˜ëŠ”ë° Input functionì€ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±ë˜ëŠ” í•¨ìˆ˜ì„
    - ë§¤ë²ˆ ìƒˆë¡­ê²Œ ìƒì„±ë˜ëŠ” í•¨ìˆ˜ì— ëŒ€í•œ ë¹„êµëŠ” falseì¼ ìˆ˜ë°–ì— ì—†ê¸° ë•Œë¬¸ì— `Input` ì»´í¬ë„ŒíŠ¸ê°€ ë§¤ë²ˆ remountë˜ëŠ” ê²ƒì„

  ```js
  // React ê´€ì ì—ì„œì˜ ë¹„êµ
  const a = () => {};
  const b = () => {};

  a === b; // will always be false
  ```

## Action

> Extended from Server Actions to support both client and server-side data handling

### ì£¼ìš” íŠ¹ì§•ë“¤

- `<form />`ê³¼ ê°™ì€ DOM elementì— í•¨ìˆ˜ í˜•íƒœë¡œ Actionì„ ë„˜ê²¨ form data handling ë¡œì§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•¨
- Submission Process
  - [transition](https://react.dev/reference/react/useTransition)ì„ ì´ìš©í•´ Action Submissionì´ ì´ë£¨ì–´ì ¸ page interactionì„ ë°©í•´í•˜ì§€ ì•ŠìŒ
  - ë¹„ë™ê¸° ë¡œì§ì„ ì²˜ë¦¬ ê°€ëŠ¥í•¨
- Optimistic Updates
  - `useOptimistic` í›…ì„ í†µí•´ì„œ optimistic state updates ê²°ê³¼ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŒ
- ê´€ë ¨ í›…ë“¤
  - [useFormStatus](https://react.dev/reference/react-dom/hooks/useFormStatus)
```jsx
import { useFormStatus } from "react-dom";
import { submitForm } from "./action.js";

function Submit() {
  const { pending, data } = useFormStatus();
  return (
    <div>
      <h3>Request a Username: </h3>
      <input type="text" name="username" disabled={pending} />
      <button type="submit" disabled={pending}>
        Submit
      </button>
      <br />
      <p>{data ? `Requesting ${data?.get("username")}...` : ""}</p>
    </div>
  );
}

function Form() {
	return (
		<form action={action}>
			<Submit />
		</form>
	)
}
```
  - [useFormState](https://react.dev/reference/react-dom/hooks/useFormState)
```jsx
import { useFormState } from "react-dom";

async function increment(previousState, formData) {
	return previousState + 1;
}

function Form() {
	const [state, formAction] = useFormState(increment, 0);
	return (
		<form>
			{state}
			<button formAction={formAction}>Increment</button>
		</form>
	)
}
```