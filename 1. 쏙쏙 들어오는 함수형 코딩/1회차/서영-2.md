# 2장. 헌실에서의 함수형 사고 (토니피자 예시)

## 토니피자 예시

- 로봇이 피자를 만듦
- 로봇은 자바스크립트로 프로그래밍 되어 있음

## 파트1: 액션과 계산, 데이터

- 액션
    - 반죽 펴기
    - 피자 배달
    - 재료 주문
- 계산
    - 조리법에 나온 것을 두 배로 만들기
    - 쇼핑 목록 결정
- 데이터
    - 고객 주문
    - 영수증
    - 조리법

### 변경 가능성에 따라 코드 나누기

- 계층화 설계

|  | 피자 주방 레이어 | 창고 레이어 | 메인 레이어 |
| --- | --- | --- | --- |
| 자주 바뀌는 것 | 이번주 메뉴 (이번 주 특별 메뉴를 위한 조리법) | 이번 주 사야할 것 (재료를 어디거 구입할지 결정) | 비즈니스 규칙 |
|  | 피자 만들기 (조리법 순서) | 재료 목록 (재료 목록에 대한 동작) | 도메인 규칙 |
| 자주 바뀌지 않는 것 | 자바스크립트 (객체, 배열) | 자바스크립트 (객체, 숫자) | 기술 스택 |
- 계층형 설계는 일반적으로 비즈니스 규칙, 도메인 규칙, 기술 스택 계층으로 나눈다
- 계층형 설계로 만든 코드는 테스트, 재사용, 유지보수가 쉽다

## 파트2: 일급 추상

### 주방을 자동화하기

- 타임라인 다이어그램 (치즈피자 만들기)
    1. 주문접수
    2. 반죽 만들기 (준비)
    3. 반죽 펴기 (사용)
    4. 소스 만들기 (준비)
    5. 소스 뿌리기 (사용)
    6. 치즈 갈기 (준비)
    7. 치즈 뿌리기 (사용)
    8. 오븐에 넣기
    9. 10분 기다리기
    10. 서빙

### 분산 시스템을 타임라인으로 시각화하기

<img width="695" alt="image" src="https://github.com/beerair/awesome-study/assets/39763891/bc79a93c-9135-4bf4-b9df-37cf3efeaf1c">

- 타임라인을 서로 맞추지 않은 분산 시스템은 예측 불가능한 순서로 실행된다

### 타임라인 커팅: 로봇이 서로를 기다릴 수 있게

- 타임라인 커팅: 여러 타임라인이 동시이 진행될 때 서로 순서를 맞추는 방법
- 고차 동작으로 구현

<img width="701" alt="image" src="https://github.com/beerair/awesome-study/assets/39763891/69f57184-1084-4262-a319-1dc0f546941c">

토니가 배운점

- 타임라인 커팅으로 서로 다른 작업들을 쉽게 이해할 수 있다
- 타임라인 다이어그램을 사용하면 시간에 따라 진행하는 작업을 쉽게 이해할 수 있다
- 타임라인은 다이어그램은 유연하다
